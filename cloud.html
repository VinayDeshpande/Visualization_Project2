<!DOCTYPE html>
<html>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="https://cdn.pubnub.com/pubnub-3.15.2.js"></script>
<script src="d3.layout.cloud.js"></script>
<head>
    <title>Word Cloud Example</title>
</head>
<style>
    body {
        font-family:"Lucida Grande","Droid Sans",Arial,Helvetica,sans-serif;
    }
    .legend {
        border: 1px solid #555555;
        border-radius: 5px 5px 5px 5px;
        font-size: 0.8em;
        margin: 10px;
        padding: 8px;
    }
    .bld {
        font-weight: bold;
    }
</style>
<body>


<script>
var fill = d3.scale.category20();

var margin = {top: 40, right: 60, bottom: 100, left: 30},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var words = [],
    freq  =[], 
    width = 500, 
    height = 500;
d3.csv("top_50_terms.csv", function(data) {
    // build the list of city names
    data.forEach( function (d) {
	/*dataAll[d.State]=[];
        dataAll[d.State].push(d);*/
		//words[d.word]=[];
        words.push({text: d.word,frequencies:d.freq, size:d.freq});
		//words[d.freq].push(d);
    });
	words = words.slice(0,50);
	  var wordscale = d3.scale.linear()
        .range([0,30])
        .domain([d3.min(words,function(d) { return (d.size)/2; }),
                 d3.max(words,function(d) { return (d.size)/2; })
               ]);
            
	      d3.layout.cloud().size([450, 300])
        .words(words)
        .padding(0)
     .rotate(0)
        .font("Impact")
        .fontSize(function(d) { return wordscale(d.size); })
        .on("end", draw)
        .start();
});
function draw(words) {
d3.select("body").append("svg")
    .attr("width",500)
    .attr("height", 300)
	.attr("class","wordcloud")//this is  a predefined class from the d3.cloud.layout.js for  formatting the input
    .append("g")
    .attr("transform","translate(250,150)")
    .selectAll("text")
    .data(words)
    .enter().append("text")
    .style("font-size", function(d) { return d.size+ "px"; })
    .style("font-family", "Impact")
    .style("fill", function(d, i) { return fill(i); })
    .attr("text-anchor", "middle")
	//can have the line above for a different alignment
    .attr("transform", function(d) {
        return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
    })
    .text(function(d) { return d.text; });
}			
</script>
<div style="width: 40%;">
    <div class="legend">
       The information  from the blog posts of huffington and wiki news has been analyzed and the 50 most used words were put in a tag cloud
    the word used the most has the largest size and the word used the least has the smallest size.
	</div>
<br/>
</div>
</body>

</html>
